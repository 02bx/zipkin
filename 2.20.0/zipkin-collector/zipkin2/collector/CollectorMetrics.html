<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (13.0.2) on Thu Feb 27 09:37:49 UTC 2020 -->
<title>CollectorMetrics (Collector: Core Library 2.20.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-02-27">
<meta name="description" content="declaration: package: zipkin2.collector, interface: CollectorMetrics">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CollectorMetrics.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">zipkin2.collector</a></div>
<h1 title="Interface CollectorMetrics" class="title">Interface CollectorMetrics</h1>
</div>
<div class="contentContainer">
<section class="description">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="InMemoryCollectorMetrics.html" title="class in zipkin2.collector">InMemoryCollectorMetrics</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">CollectorMetrics</span></pre>
<div class="block">Instrumented applications report spans over a transport such as Kafka. Zipkin collectors receive
 these messages, <a href="https://github.com/openzipkin/zipkin/zipkin/apidocs/zipkin2/codec/BytesDecoder.html?is-external=true#decode(byte%5B%5D,java.util.Collection)" title="class or interface in zipkin2.codec" class="externalLink"><code>decoding them into spans</code></a>,
 <a href="CollectorSampler.html#isSampled(java.lang.String,boolean)"><code>apply sampling</code></a>, and <a href="https://github.com/openzipkin/zipkin/zipkin-tests/apidocs/zipkin2/storage/SpanConsumer.html?is-external=true#accept(java.util.List)" title="class or interface in zipkin2.storage" class="externalLink"><code>queues them for storage</code></a>.

 <p>Callbacks on this type are invoked by zipkin collectors to improve the visibility of the
 system. A typical implementation will report metrics to a telemetry system for analysis and
 reporting.

 <h3>Spans Collected vs Queryable Spans</h3>

 <p>A span queried may be comprised of multiple spans collected. While instrumentation should
 report complete spans, Instrumentation often patch the same span twice, ex adding annotations.
 Also, RPC spans include at least 2 messages due to the client and the server reporting
 separately. Finally, some storage components merge patches at ingest. For these reasons, you
 should be cautious to alert on queryable spans vs stored spans, unless you control the
 instrumentation in such a way that queryable spans/message is reliable.

 <h3>Key Relationships</h3>

 <p>The following relationships can be used to consider health of the tracing system.

 <pre>
 <ul>
 <li>Successful Messages = <a href="#incrementMessages()"><code>Accepted messages</code></a> -
 <a href="#incrementMessagesDropped()"><code>Dropped messages</code></a>. Alert when this is less than amount of
 messages sent from instrumentation.</li>
 <li>Stored spans &lt;= <a href="#incrementSpans(int)"><code>Accepted spans</code></a> - <a href="#incrementSpansDropped(int)"><code>Dropped spans</code></a>. Alert when this drops below the
 <code>collection-tier sample rate</code>.
 </li>
 </ul>
 </pre></div>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static <a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NOOP_METRICS">NOOP_METRICS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#forTransport(java.lang.String)">forTransport</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;transportType)</code></th>
<td class="colLast">
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementBytes(int)">incrementBytes</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the number of bytes containing serialized spans in a message.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementMessages()">incrementMessages</a></span>()</code></th>
<td class="colLast">
<div class="block">Increments count of messages received, which contain 0 or more spans.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementMessagesDropped()">incrementMessagesDropped</a></span>()</code></th>
<td class="colLast">
<div class="block">Increments count of messages that could not be read.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementSpans(int)">incrementSpans</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the count of spans read from a successful message.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementSpansDropped(int)">incrementSpansDropped</a></span>&#8203;(int&nbsp;quantity)</code></th>
<td class="colLast">
<div class="block">Increments the count of spans dropped for any reason.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="NOOP_METRICS">NOOP_METRICS</a></h3>
<div class="memberSignature"><span class="modifiers">static final</span>&nbsp;<span class="returnType"><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></span>&nbsp;<span class="memberName">NOOP_METRICS</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="forTransport(java.lang.String)">forTransport</a></h3>
<div class="memberSignature"><span class="returnType"><a href="CollectorMetrics.html" title="interface in zipkin2.collector">CollectorMetrics</a></span>&nbsp;<span class="memberName">forTransport</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>&nbsp;transportType)</span></div>
<div class="block">Those who wish to partition metrics by transport can call this method to include the transport
 type in the backend metric key.

 <p>For example, an implementation may by default report <a href="#incrementSpans(int)"><code>incremented
 spans</code></a> to the key "zipkin.collector.span.accepted". When <code>metrics.forTransport("kafka"</code>
 is called, the counter would report to "zipkin.collector.kafka.span.accepted"</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>transportType</code> - ex "http", "rabbitmq", "kafka"</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementMessages()">incrementMessages</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">incrementMessages</span>()</div>
<div class="block">Increments count of messages received, which contain 0 or more spans. Ex POST requests or Kafka
 messages consumed.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementMessagesDropped()">incrementMessagesDropped</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">incrementMessagesDropped</span>()</div>
<div class="block">Increments count of messages that could not be read. Ex malformed content, or peer disconnect.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementSpans(int)">incrementSpans</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">incrementSpans</span>&#8203;(<span class="arguments">int&nbsp;quantity)</span></div>
<div class="block">Increments the count of spans read from a successful message. When bundling is used, accepted
 spans will be a larger number than successful messages.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementBytes(int)">incrementBytes</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">incrementBytes</span>&#8203;(<span class="arguments">int&nbsp;quantity)</span></div>
<div class="block">Increments the number of bytes containing serialized spans in a message.

 <p>Note: this count should relate to the raw data structures, like json or thrift, and discount
 compression, enveloping, etc.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementSpansDropped(int)">incrementSpansDropped</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">incrementSpansDropped</span>&#8203;(<span class="arguments">int&nbsp;quantity)</span></div>
<div class="block">Increments the count of spans dropped for any reason. For example, failure queueing to storage
 or sampling decisions.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CollectorMetrics.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2020 <a href="http://zipkin.io/">OpenZipkin</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
