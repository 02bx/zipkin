<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Sat Jun 04 03:00:36 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SpanStore (Zipkin 1.1.4 API)</title>
<meta name="date" content="2016-06-04">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SpanStore (Zipkin 1.1.4 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SpanStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../zipkin/storage/QueryRequest.Builder.html" title="class in zipkin.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../zipkin/storage/StorageAdapters.html" title="class in zipkin.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?zipkin/storage/SpanStore.html" target="_top">Frames</a></li>
<li><a href="SpanStore.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">zipkin.storage</div>
<h2 title="Interface SpanStore" class="title">Interface SpanStore</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../zipkin/storage/InMemorySpanStore.html" title="class in zipkin.storage">InMemorySpanStore</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">SpanStore</span></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/DependencyLink.html" title="class in zipkin">DependencyLink</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getDependencies-long-java.lang.Long-">getDependencies</a></span>(long&nbsp;endTs,
               <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;lookback)</code>
<div class="block">Returns dependency links derived from spans.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getRawTrace-long-">getRawTrace</a></span>(long&nbsp;traceId)</code>
<div class="block">Retrieves spans that share a trace id, as returned from backend data store queries, with no
 ordering expectation.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getServiceNames--">getServiceNames</a></span>()</code>
<div class="block">Get all the <a href="../../zipkin/Endpoint.html#serviceName"><code>service names</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getSpanNames-java.lang.String-">getSpanNames</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;serviceName)</code>
<div class="block">Get all the span names for a particular <a href="../../zipkin/Endpoint.html#serviceName"><code>Endpoint.serviceName</code></a>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getTrace-long-">getTrace</a></span>(long&nbsp;id)</code>
<div class="block">Get the available trace information from the storage system.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../zipkin/storage/SpanStore.html#getTraces-zipkin.storage.QueryRequest-">getTraces</a></span>(<a href="../../zipkin/storage/QueryRequest.html" title="class in zipkin.storage">QueryRequest</a>&nbsp;request)</code>
<div class="block">Get the available trace information from the storage system.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getTraces-zipkin.storage.QueryRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTraces</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;&gt;&nbsp;getTraces(<a href="../../zipkin/storage/QueryRequest.html" title="class in zipkin.storage">QueryRequest</a>&nbsp;request)</pre>
<div class="block">Get the available trace information from the storage system. Spans in trace are sorted by the
 first annotation timestamp in that span. First event should be first in the spans list.

 <p> Results are sorted in order of the first span's timestamp, and contain up to <a href="../../zipkin/storage/QueryRequest.html#limit"><code>QueryRequest.limit</code></a> elements.</div>
</li>
</ul>
<a name="getTrace-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTrace</h4>
<pre>@Nullable
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;&nbsp;getTrace(long&nbsp;id)</pre>
<div class="block">Get the available trace information from the storage system. Spans in trace are sorted by the
 first annotation timestamp in that span. First event should be first in the spans list.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of spans with the same <a href="../../zipkin/Span.html#traceId"><code>Span.traceId</code></a>, or null if not present.</dd>
</dl>
</li>
</ul>
<a name="getRawTrace-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRawTrace</h4>
<pre>@Nullable
<a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/Span.html" title="class in zipkin">Span</a>&gt;&nbsp;getRawTrace(long&nbsp;traceId)</pre>
<div class="block">Retrieves spans that share a trace id, as returned from backend data store queries, with no
 ordering expectation.

 <p>This is different, but related to <a href="../../zipkin/storage/SpanStore.html#getTrace-long-"><code>getTrace(long)</code></a>. <a href="../../zipkin/storage/SpanStore.html#getTrace-long-"><code>getTrace(long)</code></a> cleans data by
 merging spans, adding timestamps and performing clock skew adjustment. This feature is for
 debugging zipkin logic or zipkin instrumentation.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of spans with the same <a href="../../zipkin/Span.html#traceId"><code>Span.traceId</code></a>, or null if not present.</dd>
</dl>
</li>
</ul>
<a name="getServiceNames--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceNames</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getServiceNames()</pre>
<div class="block">Get all the <a href="../../zipkin/Endpoint.html#serviceName"><code>service names</code></a>.

 <p> Results are sorted lexicographically</div>
</li>
</ul>
<a name="getSpanNames-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSpanNames</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getSpanNames(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;serviceName)</pre>
<div class="block">Get all the span names for a particular <a href="../../zipkin/Endpoint.html#serviceName"><code>Endpoint.serviceName</code></a>.

 <p> Results are sorted lexicographically</div>
</li>
</ul>
<a name="getDependencies-long-java.lang.Long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getDependencies</h4>
<pre><a href="http://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../zipkin/DependencyLink.html" title="class in zipkin">DependencyLink</a>&gt;&nbsp;getDependencies(long&nbsp;endTs,
                                     @Nullable
                                     <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;lookback)</pre>
<div class="block">Returns dependency links derived from spans.

 <p>Implementations may bucket aggregated data, for example daily. When this is the case, endTs
 may be floored to align with that bucket, for example midnight if daily. lookback applies to
 the original endTs, even when bucketed. Using the daily example, if endTs was 11pm and lookback
 was 25 hours, the implementation would query against 2 buckets.

 <p>Some implementations parse <code>DependencyLinkSpan</code> from storage and call
 <code>DependencyLinker</code> to aggregate links. The reason is certain graph logic,
 such as skipping up the tree is difficult to implement as a storage query.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>endTs</code> - only return links from spans where <a href="../../zipkin/Span.html#timestamp"><code>Span.timestamp</code></a> are at or before this
              time in epoch milliseconds.</dd>
<dd><code>lookback</code> - only return links from spans where <a href="../../zipkin/Span.html#timestamp"><code>Span.timestamp</code></a> are at or after
                 (endTs - lookback) in milliseconds. Defaults to endTs.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>dependency links in an interval contained by (endTs - lookback) or empty if none are
         found</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SpanStore.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../zipkin/storage/QueryRequest.Builder.html" title="class in zipkin.storage"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../zipkin/storage/StorageAdapters.html" title="class in zipkin.storage"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?zipkin/storage/SpanStore.html" target="_top">Frames</a></li>
<li><a href="SpanStore.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2016 <a href="http://zipkin.io/">OpenZipkin</a>. All rights reserved.</small></p>
</body>
</html>
